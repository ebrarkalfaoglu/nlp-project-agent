# -*- coding: utf-8 -*-
"""agentfinal.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1ar82am7k5WO6sxDpjWMK_v0ydGTXumv7
"""

from google.colab import drive
drive.mount("/content/drive")

import os

BASE_DIR = "/content/drive/MyDrive/imar_rag"
RAW_DIR = os.path.join(BASE_DIR, "data/raw")
os.makedirs(RAW_DIR, exist_ok=True)

print("ğŸ“ KlasÃ¶r hazÄ±r:", RAW_DIR)

!pip install pymupdf

import fitz  # PyMuPDF

pdf_path = "/content/drive/MyDrive/imar_rag/data/raw/planli-20210811131259.pdf"
output_path = "/content/drive/MyDrive/imar_rag/data/planli_alanlar_imar_yonetmeligi.txt"

doc = fitz.open(pdf_path)

all_text = []

for page_num, page in enumerate(doc):
    text = page.get_text()
    all_text.append(f"\n--- SAYFA {page_num + 1} ---\n")
    all_text.append(text)

doc.close()

with open(output_path, "w", encoding="utf-8") as f:
    f.write("\n".join(all_text))

print("âœ… PDF metne Ã§evrildi:", output_path)

import os
import json

BASE_DIR = "/content/drive/MyDrive/imar_rag/data"

txt_path = os.path.join(BASE_DIR, "planli_alanlar_imar_yonetmeligi.txt")
output_path = os.path.join(BASE_DIR, "chunks.jsonl")

chunk_size = 800
overlap = 150

with open(txt_path, "r", encoding="utf-8") as f:
    text = f.read()

chunks = []
start = 0
chunk_id = 0

while start < len(text):
    end = start + chunk_size
    chunk_text = text[start:end]

    chunks.append({
        "chunk_id": chunk_id,
        "text": chunk_text
    })

    chunk_id += 1
    start = end - overlap

with open(output_path, "w", encoding="utf-8") as f:
    for chunk in chunks:
        f.write(json.dumps(chunk, ensure_ascii=False) + "\n")

print(f"âœ… {len(chunks)} adet chunk oluÅŸturuldu")
print("ğŸ“„ Kaydedildi:", output_path)

!pip install chromadb sentence-transformers

from chromadb.utils import embedding_functions

import json
import os
import chromadb
from sentence_transformers import SentenceTransformer

BASE_DIR = "/content/drive/MyDrive/imar_rag/data"
chunks_path = f"{BASE_DIR}/chunks.jsonl"
chroma_path = f"{BASE_DIR}/chroma_final"

os.makedirs(chroma_path, exist_ok=True)

# ğŸ”´ Embedding'i BÄ°Z Ã¼retiyoruz
model = SentenceTransformer("sentence-transformers/all-MiniLM-L6-v2")

documents = []
embeddings = []
ids = []

with open(chunks_path, "r", encoding="utf-8") as f:
    for line in f:
        item = json.loads(line)
        text = item["text"]
        documents.append(text)
        embeddings.append(model.encode(text))
        ids.append(str(item["chunk_id"]))

print("âœ… Embedding Ã¼retildi:", len(embeddings))

client = chromadb.PersistentClient(path=chroma_path)

collection = client.get_or_create_collection(
    name="imar_yonetmeligi_manual"
)

collection.add(
    documents=documents,
    embeddings=embeddings,  # ğŸ”´ KRÄ°TÄ°K
    ids=ids
)

print("âœ… Chroma'ya yazÄ±ldÄ±")
print("ğŸ“¦ count:", collection.count())

!ls /content/drive/MyDrive/imar_rag/data/chroma_final

collection.count()

!pip install groq
import groq

print(groq.__version__)

from google.colab import userdata
from groq import Groq

groq_api_key = userdata.get('GROQ_API_KEY')
groq_client = Groq(api_key=groq_api_key)

chat_completion = groq_client.chat.completions.create(
    model="llama-3.3-70b-versatile",
    messages=[
        {"role": "user", "content": "Merhaba, Ã§alÄ±ÅŸÄ±yor musun?"}
    ]
)

print(chat_completion.choices[0].message.content)

!pip install yfinance
import re
import math
import yfinance as yf
from collections import Counter

# 2. RAG MOTORU (In-Memory Vector Store)
# ------------------------------------------------------------------


class SimpleRAG:
    def __init__(self):
        self.vector_store = []

    def get_embedding(self, text):
        words = re.findall(r'\w+', text.lower())
        return Counter(words)

    def _cosine_similarity(self, vec1, vec2):
        intersection = set(vec1.keys()) & set(vec2.keys())
        numerator = sum([vec1[x] * vec2[x] for x in intersection])
        sum1 = sum([vec1[x]**2 for x in vec1.keys()])
        sum2 = sum([vec2[x]**2 for x in vec2.keys()])
        denominator = math.sqrt(sum1) * math.sqrt(sum2)
        return float(numerator) / denominator if denominator else 0.0

    def ingest(self, text):
        chunks = [s.strip() for s in text.split('.') if s.strip()]
        for chunk in chunks:
            self.vector_store.append({
                "content": chunk,
                "vector": self.get_embedding(chunk)
            })

    def retrieve(self, query, top_k=2):
        query_vec = self.get_embedding(query)
        scores = []
        for item in self.vector_store:
            score = self._cosine_similarity(query_vec, item["vector"])
            scores.append((score, item["content"]))
        scores.sort(key=lambda x: x[0], reverse=True)
        return "\n".join([item[1] for item in scores[:top_k] if item[0] > 0])

# RAG Data Ingestion
rag_engine = SimpleRAG()
mock_data = """
TechCorp employees are allowed to work remotely for 3 days a week.
Lunch is provided for free at the office, and no meal card is given.
TechCorp annual leave entitlement is 14 days for the first year.
Performance bonuses are distributed at the end of each quarter based on EBITDA targets.
"""
rag_engine.ingest(mock_data)

import requests
from bs4 import BeautifulSoup

def web_search_tool(query: str) -> str:
    """
    Use this tool to search the internet for up-to-date or external information.
    Returns a short textual summary from the web.
    """
    print(f"\nğŸŒ [WEB SEARCH] Searching the web for: '{query}'")

    url = f"https://duckduckgo.com/html/?q={query}"
    response = requests.get(url, headers={"User-Agent": "Mozilla/5.0"})

    if response.status_code != 200:
        return "Web search failed."

    soup = BeautifulSoup(response.text, "html.parser")
    results = soup.find_all("a", class_="result__a")

    snippets = []
    for r in results[:3]:
        snippets.append(r.get_text())

    return " | ".join(snippets) if snippets else "No web results found."

# 3. ARAÃ‡LAR (TOOLS) - DOCSTRINGS EKLENDÄ° (KRÄ°TÄ°K)
# ------------------------------------------------------------------
import yfinance as yf

def calculator(expression: str) -> str:
    """
    Calculates the result of a mathematical expression.
    e.g. calculator: 100 * 0.15
    """
    try:
        allowed_chars = set("0123456789+-*/(). ")
        if not all(c in allowed_chars for c in expression):
            return "Error: Invalid characters."
        return str(eval(expression))
    except Exception as e:
        return f"Error: {e}"

import chromadb
from sentence_transformers import SentenceTransformer

embedding_model = SentenceTransformer("sentence-transformers/all-MiniLM-L6-v2")

CHROMA_PATH = "/content/drive/MyDrive/imar_rag/data/chroma_final"
client = chromadb.PersistentClient(path=CHROMA_PATH)
collection = client.get_collection(name="imar_yonetmeligi_manual")

def search_knowledge_base(query: str) -> str:
    """
    Use this tool to search the Imar Yonetmeligi knowledge base.
    Returns raw regulation text (context only).
    """
    print(f"\nğŸ” [IMAR RAG] Searching for: '{query}'")

    query_vec = embedding_model.encode(query).tolist()

    results = collection.query(
        query_embeddings=[query_vec],
        n_results=3
    )

    contexts = results["documents"][0]

    if not contexts:
        return "No relevant regulation text found."

    return "\n".join(contexts)


def company_address(ticker: str)-> str:
    """
    Returns company address for input ticker.
    e.g. company_address: AAPL
    Returns company address for ticker AAPL which is stock ticker for Apple Inc.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return " ".join([info[key] for key in ["address1", "city", "state", "zip", "country"]])

def fulltime_employees(ticker: str)-> int:
    """
    Returns fulltime employees count for input ticker.
    e.g. fulltime_employees: MSFT
    Returns fulltime employees count for ticker MSFT which is stock ticker for Microsoft.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return info["fullTimeEmployees"]


def last_close_price(ticker: str)-> float:
    """
    Returns last close price for input ticker.
    e.g. last_close_price: MSFT
    Returns latest close price for ticker MSFT which is stock ticker for Microsoft.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return info["previousClose"]

def EBITDA(ticker: str)-> float:
    """
    Returns EBITDA for input ticker.
    e.g. EBITDA: AAPL
    Returns EBITDA for ticker AAPL which is stock ticker for Apple.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return info["ebitda"]

def total_debt(ticker: str)-> float:
    """
    Returns total debt for input ticker.
    e.g. total_debt: AAPL
    Returns total debt for ticker AAPL which is stock ticker for Apple.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return info["totalDebt"]

def total_revenue(ticker: str)-> float:
    """
    Returns total revenue for input ticker.
    e.g. total_revenue: MSFT
    Returns total revenue for ticker MSFT which is stock ticker for Microsoft.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return info["totalRevenue"]

def debt_to_equity_ratio(ticker: str)-> float:
    """
    Returns debt to equity ratio for input ticker.
    e.g. debt_to_equity_ratio: AAPL
    Returns debt to equity ratio for ticker AAPL which is stock ticker for Apple.
    """
    ticker_obj = yf.Ticker(ticker)
    info = ticker_obj.get_info()

    return info["debtToEquity"]
# Tool List
tools = [calculator, search_knowledge_base, web_search_tool, company_address, fulltime_employees, last_close_price, EBITDA, total_debt, total_revenue]

tools_with_desc = "\n\n".join([tool.__name__ + tool.__doc__ for tool in tools])

print(tools_with_desc)

known_actions = dict([(tool.__name__, tool) for tool in tools])
known_actions

system_prompt = f"""
You run in a loop of Thought, Action, PAUSE, Observation.
At the end of the loop you output an Answer.

GUIDELINES:
1. Use 'search_knowledge_base' for questions related to Imar Yonetmeligi, zoning rules, construction regulations, emsal, kat sayisi, bina kosullari.
2. Use other tools (yfinance) for public stock market data.
3. Use 'calculator' for ANY math calculation. DO NOT calculate in your head.
4. Use Thought to describe your routing decision.
5. When you have enough information to answer the question, you MUST produce a line starting with "Answer:" and stop.
6. Use 'web_search_tool' ONLY when information is not available in the Imar Yonetmeligi or requires current/external knowledge.
7. If a question mentions a specific year (e.g. 2024), current events, laws, government decisions, or amnesty (imar affÄ±),
you MUST use web_search_tool as the FIRST action.
Do NOT use search_knowledge_base before web_search_tool in such cases.
8. All answers must be in Turkish.

Your available actions are:

{tools_with_desc}

Example session:

Question: What is half of Apple's last close price?
Thought: I need to get the price first, then divide by 2 using calculator.
Action: last_close_price: AAPL
PAUSE
Observation: 220.0
Thought: Now I need to calculate half of 220.0
Action: calculator: 220.0 / 2
PAUSE
Observation: 110.0
Answer: Half of Apple's last close price is 110.0 USD.
""".strip()
class Agent:
    def __init__(self, system=""):
        self.system = system

    def __call__(self, message):
        return self.execute(message)

    def execute(self, message):
        messages = [
            {"role": "system", "content": self.system},
            {"role": "user", "content": message}
        ]

        result = groq_client.chat.completions.create(
            model="llama-3.3-70b-versatile",
            messages=messages,
            temperature=0,
            max_tokens=512,          # ğŸ”¥ Ã¶nemli
            stop=["<|"]
        )

        return result.choices[0].message.content

agent = Agent(system_prompt)
agent("Konut alanlarÄ±nda emsal nasÄ±l hesaplanÄ±r?")

obs = search_knowledge_base("Konut alanlarÄ±nda emsal hesaplanmasÄ±")
print(obs)

final_answer = agent.execute()
print(final_answer)

# 5. ORKESTRASYON DÃ–NGÃœSÃœ (FINAL)
# ------------------------------------------------------------------
import re

action_re = re.compile(r'^Action: (\w+): (.*)$')

def query(question, max_turns=10):
    i = 0
    react_agent = Agent(system_prompt)
    next_prompt = question
    used_actions = set()   # ğŸ”’ Loop prevention

    print(f"\n{'='*40}\nQUESTION: {question}\n{'='*40}")

    while i < max_turns:
        i += 1

        result = react_agent(next_prompt)
        print(f"\033[94m{result}\033[0m")

        actions = [action_re.match(a) for a in result.split('\n') if action_re.match(a)]

        if actions:
            action, action_input = actions[0].groups()

            if action not in known_actions:
                raise Exception(f"Unknown action: {action}: {action_input}")

            # ğŸ” AynÄ± tool tekrar Ã§aÄŸrÄ±lmasÄ±n
            if action in used_actions:
                print(f"=> {action} already used, skipping to prevent loop")
                next_prompt = (
                    "Observation: This tool was already used and did not provide new information. "
                    "Use existing observations to answer the question."
                )
                continue

            used_actions.add(action)

            print(f"=> Running {action} with input: {action_input}")

            try:
                observation = known_actions[action](action_input)
            except Exception as e:
                observation = f"Error executing tool: {e}"

            print(f"Observation: {observation}")
            next_prompt = f"Observation: {observation}"

        else:
            if "Answer:" in result:
                print("\n\033[92m--- FINAL ANSWER FOUND ---\033[0m")
                print(result.split("Answer:")[-1].strip())
            return

query("Konut alanlarÄ±nda emsal nasÄ±l hesaplanÄ±r?")

query("1000 mÂ² arsada emsal 1.50 ise maksimum inÅŸaat alanÄ± kaÃ§ mÂ²â€™dir?")

query("2024 yÄ±lÄ±nda TÃ¼rkiyeâ€™de imar affÄ± var mÄ± ve emsal hesabÄ±nÄ± etkiler mi?")

query("Ä°mar affÄ± kapsamÄ±na giren yapÄ±larÄ±n, sonradan yapÄ±lacak yeni inÅŸaatlarda emsal (KAKS) hesabÄ±na etkisi olur mu?")

query("""
Ä°mar yÃ¶netmeliÄŸine gÃ¶re konut alanlarÄ±nda emsal (KAKS) hesabÄ± nasÄ±l tanÄ±mlanÄ±r?

Ä°stanbul iÃ§in gÃ¼ncel dolar/TL kurunu web Ã¼zerinden Ã¶ÄŸren.
ArdÄ±ndan 800 mÂ² bÃ¼yÃ¼klÃ¼ÄŸÃ¼nde bir parsel iÃ§in,
emsal (KAKS) deÄŸeri 1.25 olan bir imar parselinde
maksimum inÅŸaat alanÄ±nÄ± hesapla.

Son olarak, bulunan maksimum inÅŸaat alanÄ±nÄ±n
1 mÂ² inÅŸaat maliyeti 900 USD kabul edilirse,
toplam inÅŸaat maliyetini TL cinsinden hesapla.

""")

query("3194 sayÄ±lÄ± Ä°mar Kanunuâ€™nun 18. maddesi uygulamasÄ±yla arazi ve arsa dÃ¼zenlemesi yapÄ±lÄ±rken, mal sahiplerinin arsalarÄ±ndan en fazla yÃ¼zde kaÃ§ oranÄ±nda alan kamu kullanÄ±mÄ±na ayrÄ±labilir?")
query("KÃ¶y yerleÅŸik alanÄ± iÃ§inde, kÃ¶y nÃ¼fusuna kayÄ±tlÄ± kiÅŸiler kendi ihtiyaÃ§larÄ± iÃ§in en fazla kaÃ§ katlÄ± konutlarÄ± yapÄ± ruhsatÄ± almadan inÅŸa edebilir?")
query("Ä°mar planÄ± bulunmayan bir tarlaya veya araziye yasal olarak bina yapabilmek iÃ§in Ã¶ncelikle ne yapÄ±lmalÄ±dÄ±r?")
query("BÃ¼yÃ¼kÅŸehir belediyesi olan illerde 1/5000 Ã¶lÃ§ekli nazÄ±m imar planÄ±nÄ± onaylama yetkisi kimdedir? 1/1000 Ã¶lÃ§ekli uygulama imar planÄ±nÄ± onaylama yetkisi kimdedir?")
query("Bir Organize Sanayi BÃ¶lgesi (OSB) iÃ§erisindeki imar planlarÄ±nÄ± hangi kurum onaylar? OSB iÃ§indeki yapÄ± ruhsatlarÄ±nÄ± verme yetkisi kimdedir?")

query("KÃ¼ltÃ¼r ve Turizm Koruma ve GeliÅŸim BÃ¶lgesi ilan edilmiÅŸ bir alanda imar planlarÄ±nÄ± yapma ve onaylama yetkisi hangi bakanlÄ±ÄŸa aittir?")
query("1/5000 Ã¶lÃ§ekli nazÄ±m imar planÄ± ile 1/1000 Ã¶lÃ§ekli uygulama imar planÄ± arasÄ±nda iÃ§erik ve amaÃ§ bakÄ±mÄ±ndan ne fark vardÄ±r?")
query("NazÄ±m imar planÄ± ile uygulama imar planÄ± arasÄ±nda bir Ã§eliÅŸki ortaya Ã§Ä±karsa, plan uygulamalarÄ±nda hangisi esas alÄ±nÄ±r? Bu durumda ne yapÄ±lmasÄ± gerekir?")
query("Kadastro parseli ile imar parseli kavramlarÄ± ne anlama gelir? AralarÄ±ndaki fark nedir?")
query("PlanlÄ± bir alanda bir parselin ifraz (ayrÄ±lÄ±p kÃ¼Ã§Ã¼ltÃ¼lmesi) yapÄ±larak yeni parseller oluÅŸturulabilmesi iÃ§in hangi ÅŸartlarÄ±n saÄŸlanmasÄ± gerekir?")

query("Ä°mar planÄ±nda arsasÄ± 'park alanÄ±' olarak ayrÄ±lan bir kiÅŸi, arsasÄ±na bina yapabilir mi? Bu durumda arsa sahibi hangi haklara sahiptir veya ne talep edebilir?")
query("YapÄ± ruhsatÄ± ile yapÄ± kullanma izni (iskan) arasÄ±ndaki fark nedir? Bir binada iskan izni olmadan kullanÄ±ma geÃ§ilirse ne tÃ¼r sorunlar ortaya Ã§Ä±kar?")
query("OnaylÄ± imar planlarÄ±nda deÄŸiÅŸiklik (plan tadilatÄ±) yapmak iÃ§in izlenen sÃ¼reÃ§ nasÄ±ldÄ±r? Plan deÄŸiÅŸikliÄŸi taleplerini kimler, nasÄ±l teklif edebilir?")
query("RuhsatsÄ±z veya imara aykÄ±rÄ± (kaÃ§ak) yapÄ± tespit edildiÄŸinde belediye tarafÄ±ndan hangi iÅŸlemler uygulanÄ±r? KaÃ§ak yapÄ± sahibini ne gibi yaptÄ±rÄ±mlar bekler?")
query("Temel gerektirmeyen prefabrik veya konteyner yapÄ±lar, imar mevzuatÄ±na gÃ¶re yapÄ± ruhsatÄ± gerektirir mi? Bu tÃ¼r yapÄ±lar iÃ§in izin alÄ±nmasÄ± gerekir mi?")

query("Bir parselde imar yÃ¶netmeliÄŸine gÃ¶re gerekli otopark alanÄ± parselde saÄŸlanamÄ±yorsa, bu sorunu Ã§Ã¶zmek iÃ§in mevzuatta Ã¶ngÃ¶rÃ¼len yÃ¶ntem nedir?")
query("Tescilli bir tarihi yapÄ±da (korunmasÄ± gerekli kÃ¼ltÃ¼r varlÄ±ÄŸÄ±) restorasyon veya tadilat yapmak iÃ§in hangi kuruldan onay almak gerekir?")
query("Kentsel sit alanlarÄ±nda yapÄ±lacak yeni yapÄ± ve dÃ¼zenlemeler hangi tÃ¼r imar planÄ±na gÃ¶re gerÃ§ekleÅŸtirilir ve bu planlar kimlerin onayÄ±na tabidir?")
query("Kentsel tasarÄ±m projesi nedir? Bir kentsel tasarÄ±m projesinin imar planÄ±ndan farkÄ± nedir; imar planÄ± yerine geÃ§er mi?")
query("6306 sayÄ±lÄ± Kanun kapsamÄ±nda bir binanÄ±n 'riskli yapÄ±' olarak tespit edilmesi nasÄ±l yapÄ±lÄ±r ve bu tespit yapÄ±ldÄ±ÄŸÄ±nda bina sahibi aÃ§Ä±sÄ±ndan sÃ¼reÃ§ nasÄ±l devam eder?")

query("Afet riski altÄ±ndaki alanlarÄ±n dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi hakkÄ±nda 6306 sayÄ±lÄ± Kanun uyarÄ±nca 'riskli alan' ilan edilen bir bÃ¶lgede imar planlarÄ± kimin tarafÄ±ndan hazÄ±rlanÄ±r ve onaylanÄ±r? Bu alanlarda planlama sÃ¼reci nasÄ±ldÄ±r?")
query("2018 yÄ±lÄ±nda getirilen 'imar barÄ±ÅŸÄ±' dÃ¼zenlemesi kapsamÄ±nda verilen YapÄ± KayÄ±t Belgesi bir yapÄ±ya hangi haklarÄ± saÄŸlar? Hangi durumlarda yeni imar hakkÄ± getirmez?")
query("KÄ±yÄ± Kanunuâ€™na gÃ¶re deniz kÄ±yÄ±sÄ±nda, kÄ±yÄ± kenar Ã§izgisinden itibaren kaÃ§ metrelik alan yapÄ±laÅŸmaya tamamen kapalÄ±dÄ±r? KÄ±yÄ± bÃ¶lgesinin ikinci 50 metrelik kÄ±smÄ±nda hangi tÃ¼r kullanÄ±mlara izin verilebilir?")
query("Bir parselin imar planÄ±nda 'TAKS=0.30, KAKS=1.20, Hmax=15 m, 4 kat' ÅŸeklinde belirtilen yapÄ±laÅŸma koÅŸullarÄ± o parselde yapÄ±labilecek bina iÃ§in ne anlama gelir? Bu deÄŸerler bina yÃ¼ksekliÄŸi ve kat adedi aÃ§Ä±sÄ±ndan nasÄ±l uygulanÄ±r?")
query("Ä°mar planlarÄ±nda sosyal ve teknik altyapÄ± (donatÄ±) alanlarÄ±na hangi Ã¶rnekler verilebilir? Bu alanlar ne tÃ¼r kullanÄ±m amaÃ§larÄ±nÄ± iÃ§erir?")

query("Ä°mar planÄ± paftalarÄ±nda yer alan plan notlarÄ±nÄ±n hukuki baÄŸlayÄ±cÄ±lÄ±ÄŸÄ± nedir? Plan notlarÄ± imar uygulamalarÄ±nda ne gibi bir rol oynar?")
query("Bir arsa sahibi, imar planÄ±nda yol olarak gÃ¶rÃ¼len kÄ±sÄ±mlarÄ±nÄ± 'yol terki' yaparsa, bunun anlamÄ± nedir? Bu iÅŸlem arsa ve plan aÃ§Ä±sÄ±ndan neyi ifade eder?")
query("Ä°mar planÄ±nda bir bÃ¶lgenin bina yÃ¼ksekliÄŸi 'serbest' olarak belirlenmiÅŸse, bu ne anlama gelir? Bina yÃ¼ksekliÄŸi pratikte neye gÃ¶re sÄ±nÄ±rlandÄ±rÄ±lÄ±r?")
query("TAKS (taban alanÄ± katsayÄ±sÄ±) nedir? YÃ¼ksek bir TAKS deÄŸeri ile dÃ¼ÅŸÃ¼k bir TAKS deÄŸerine sahip olmak, bir parseldeki yapÄ±laÅŸmanÄ±n ÅŸeklini nasÄ±l etkiler?")
query("Bir inÅŸaat projesinde fenni mesuliyet kimler tarafÄ±ndan Ã¼stlenilir? Fenni mesul olarak gÃ¶rev yapan kiÅŸilerin sorumluluklarÄ± nelerdir?")

query("KÃ¶y yerleÅŸik alanÄ±nÄ±n sÄ±nÄ±rlarÄ± nasÄ±l belirlenir ve resmi olarak kim tarafÄ±ndan onaylanÄ±r?")
query("Belediyelerin 5 yÄ±llÄ±k imar programÄ± nedir? Ä°mar programÄ±na alÄ±nmayan, kamu hizmetine ayrÄ±lmÄ±ÅŸ arsalar iÃ§in arsa sahipleri yÃ¶nÃ¼nden ne gibi sonuÃ§lar doÄŸurur?")
query("OnaylanmÄ±ÅŸ bir imar planÄ±na karÅŸÄ± bir vatandaÅŸ nasÄ±l itiraz edebilir veya dava aÃ§abilir? Plan deÄŸiÅŸikliÄŸine itiraz ve yargÄ± sÃ¼reci nasÄ±ldÄ±r?")
query("MÃ¼cavir alan nedir? Bir belediyenin mÃ¼cavir alan ilan etmesinin amacÄ± nedir?")
query("Belediye ve mÃ¼cavir alan sÄ±nÄ±rlarÄ± dÄ±ÅŸÄ±nda kalan yerlerde imar planÄ± yapma ve yapÄ± ruhsatÄ± verme yetkisi hangi kuruma aittir?")